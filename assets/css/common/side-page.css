/* === two-column layout (narrow left rail) === */
body:not(.home) .side-layout {
  display: grid;
  grid-template-columns: 180px minmax(0, 1fr);
  column-gap: var(--gap);
}

/* collapse the left column if there are no links */
body:not(.home) .side-nav:empty { display: none; }
body:not(.home) .side-nav:empty + * { grid-column: 1 / -1; }

/* prevent overflow from code blocks/images in the grid */
body:not(.home) .side-layout > * { min-width: 0; }

/* === sidebar (pulled left, sticky, scrollable) === */
body:not(.home) .side-nav {
  position: sticky;
  top: 1rem;
  margin-top: 2rem;

  /* align with main edge */
  margin-left: calc(-1 * var(--gap));
  padding-left: var(--gap);

  max-height: calc(100vh - 2rem);
  overflow: auto;
  padding-right: .5rem;
}

/* === sidebar links (compact) === */
body:not(.home) .side-link {
  display: block;
  padding: .25rem 0;
  font-size: 14px;
  line-height: 1.25;
  text-decoration: none;
}

body:not(.home) .side-link:hover { text-decoration: underline; }
body:not(.home) .side-link.active { font-weight: 600; text-decoration: underline; }

/* === mobile: stack; sidebar becomes horizontal pill list === */
@media (max-width: 900px) {
  body:not(.home) .side-layout {
    grid-template-columns: 1fr;
    gap: 1rem;
  }
  body:not(.home) .side-nav {
    position: static;
    max-height: none;
    overflow: auto;
    white-space: nowrap;
    border-bottom: 1px solid var(--border, rgba(0,0,0,.12));
    padding: 0 0 .5rem 0;
    margin: 0 0 1rem 0;
  }
  body:not(.home) .side-link {
    display: inline-block;
    padding: .5rem .75rem .5rem 0;
    font-size: 14px;
    line-height: 1.2;
  }
}

/* ==== Sidebar palette: TEAL variant (high contrast) ==== */
:root {
  /* light mode */
  --side-text:       hsl(183 42% 25%);
  --side-muted:      hsl(183 28% 35%);
  --side-hover-bg:   hsl(183 72% 92%);
  --side-active-bg:  hsl(183 62% 88%);
  --side-accent:     hsl(183 72% 38%);
}
.dark {
  /* dark mode */
  --side-text:       hsl(183 70% 82%);
  --side-muted:      hsl(183 35% 70%);
  --side-hover-bg:   hsla(183, 60%, 40%, 0.18);
  --side-active-bg:  hsla(183, 60%, 40%, 0.26);
  --side-accent:     hsl(183 70% 55%);
}

/* Apply with strong specificity so it always wins (but not on home) */
body:not(.home) .main .side-layout .side-nav a.side-link {
  color: var(--side-muted);
  border-left: 3px solid transparent;
  border-radius: 6px;
  padding: .35rem .5rem .35rem .65rem;
  transition: background .15s ease, color .15s ease, border-color .15s ease;
}
body:not(.home) .main .side-layout .side-nav a.side-link:hover,
body:not(.home) .main .side-layout .side-nav a.side-link:focus {
  background: var(--side-hover-bg);
  color: var(--side-text);
  text-decoration: none;
}
body:not(.home) .main .side-layout .side-nav a.side-link.active {
  background: var(--side-active-bg);
  border-left-color: var(--side-accent);
  color: var(--side-text);
  font-weight: 600;
}
body:not(.home) .main .side-layout .side-nav a.side-link:visited {
  color: var(--side-muted);
}
